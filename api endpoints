from flask import Flask, request, jsonify
from flask_cors import CORS
import data_handler

app = Flask(__name__)
CORS(app)

@app.route('/api/environments/<appid>', methods=['GET'])
def get_environments(appid):
    environments = data_handler.get_unique_environments(appid)
    return jsonify(environments)

@app.route('/api/appdetails', methods=['GET'])
def get_app_details():
    appid = request.args.get('appid')
    environment = request.args.get('environment')
    details = data_handler.get_app_details(appid, environment)
    return jsonify(details)

if __name__ == '__main__':
    app.run(debug=True)
